{% load static %}
<!doctype html>
<html lang="en" data-bs-theme="blue-theme">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Google Trends API | Search History</title>
  <!--favicon-->
  <link rel="icon" href="{% static 'images/favicon-32x32.png' %}" type="image/png">
  <!-- loader-->
  <link href="{% static 'css/pace.min.css' %}" rel="stylesheet">
  <script src="{% static 'js/pace.min.js' %}"></script>

  <!--plugins-->
  <link href="{% static 'plugins/perfect-scrollbar/css/perfect-scrollbar.css' %}" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'plugins/metismenu/metisMenu.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'plugins/metismenu/mm-vertical.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'plugins/simplebar/css/simplebar.css' %}">
  <!--bootstrap css-->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'plugins/datatable/css/dataTables.bootstrap5.min.css' %}" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons+Outlined" rel="stylesheet">
  <!--main css-->
  <link href="{% static 'css/bootstrap-extended.css' %}" rel="stylesheet">
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  <link href="{% static 'css/dark-theme.css' %}" rel="stylesheet">
  <link href="{% static 'css/blue-theme.css' %}" rel="stylesheet">
  <link href="{% static 'css/semi-dark.css' %}" rel="stylesheet">
  <link href="{% static 'css/bordered-theme.css' %}" rel="stylesheet">
  <link href="{% static 'css/responsive.css' %}" rel="stylesheet">

</head>

<body>

  {% include 'components/header.html' %}
  {% include 'components/sidebar.html' %}

  <!--start main wrapper-->
  <main class="main-wrapper">
    <div class="main-content">
      <!--breadcrumb-->
      <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
        <div class="breadcrumb-title pe-3">Search History</div>
        <div class="ps-3">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0 p-0">
              <li class="breadcrumb-item"><a href="{% url 'home' %}"><i class="bx bx-home-alt"></i></a>
              </li>
              <li class="breadcrumb-item active" aria-current="page">Search History</li>
            </ol>
          </nav>
        </div>
      </div>
      <!--end breadcrumb-->
      
      <div class="card">
        <div class="card-body">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <h5 class="mb-0">Your Search History</h5>
            <div>
              <span class="badge bg-primary">{{ searches_left }} searches left</span>
              <a href="{% url 'search_trends' %}" class="btn btn-sm btn-primary ms-2">New Search</a>
            </div>
          </div>
          <div class="table-responsive">
            <table id="example2" class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Search Term</th>
                  <th>Country</th>
                  <th>Time Range</th>
                  <th>Platform</th>
                  <th>Search Date</th>
                </tr>
              </thead>
              <tbody>
                {% for search in searches %}
                <tr>
                  <td>{{ search.search_term }}</td>
                  <td>{{ search.country|default:"Global" }}</td>
                  <td>{{ search.time_range|default:"Last 12 Months" }}</td>
                  <td>{{ search.platform|default:"Web" }}</td>
                  <td>{{ search.search_date|date:"Y-m-d H:i" }}</td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="5" class="text-center">No search history found. <a href="{% url 'search_trends' %}">Start searching</a>!</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>
  <!--end main wrapper-->

  <!--start overlay-->
  <div class="overlay btn-toggle"></div>
  <!--end overlay-->

  <!--start footer-->
  <footer class="page-footer">
    <p class="mb-0">Copyright Â© 2024. All right reserved.</p>
  </footer>
  <!--top footer-->

  <!--bootstrap js-->
  <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

  <!--plugins-->
  <script src="{% static 'js/jquery.min.js' %}"></script>
  <script src="{% static 'plugins/perfect-scrollbar/js/perfect-scrollbar.js' %}"></script>
  <script src="{% static 'plugins/metismenu/metisMenu.min.js' %}"></script>
  <script src="{% static 'plugins/simplebar/js/simplebar.min.js' %}"></script>
  <script src="{% static 'plugins/datatable/js/jquery.dataTables.min.js' %}"></script>
  <script src="{% static 'plugins/datatable/js/dataTables.bootstrap5.min.js' %}"></script>
  <script src="{% static 'js/main.js' %}"></script>
  
  <script>
    $(document).ready(function() {
      $('#search-history-table').DataTable({
        "order": [[4, "desc"]], // Sort by search date (column 4) in descending order
        "lengthMenu": [10, 25, 50, 100],
        "language": {
          "emptyTable": "No search history found"
        }
      });
    });
    $(document).ready(function() {
			var table = $('#example2').DataTable( {
				lengthChange: false,
				buttons: [ 'copy', 'excel', 'pdf', 'print']
			} );
		 
			table.buttons().container()
				.appendTo( '#example2_wrapper .col-md-6:eq(0)' );
		} );
  </script>

</body>

</html>
